import"./chart.esm-a5e4ede4.js";import{r as W,o as B,c as C,a as o,t as b,n as k,w as q,b as d,d as J,S as E,u as K,e as Q,f as i,m as v,g as T,h as X,F as Z}from"./index-59b1a81b.js";import{_ as R}from"./ErrorMessage-f525a803.js";import{_ as ee}from"./LoadingModal-bfb2afa3.js";import{_ as te}from"./CalendarDropdown-c8b3d21a.js";import{D as g}from"./DataGraphService-649fbddf.js";const oe={class:"card mb-0"},se={class:"flex justify-content-between mb-3"},ae={class:"block text-500 font-medium mb-3"},re={class:"text-900 font-medium text-xl"},le={class:"text-green-500 font-medium"},ne={class:"text-500"},_={__name:"DashboardSummaryWidget",props:{data:Number|String,title:String,iconBg:String,icon:String,footerBoldedText:String,footerText:String,tooltip:String},setup(D){const r=D;return(x,y)=>{const u=W("tooltip");return B(),C("div",oe,[o("div",se,[o("div",null,[o("span",ae,b(r.title),1),o("div",re,b(r.data),1)]),o("div",{class:k(["flex align-items-center justify-content-center border-round",r.iconBg]),style:{width:"2.5rem",height:"2.5rem"}},[q(o("i",{class:k(["pi text-xl",r.icon])},null,2),[[u,{value:r.tooltip},void 0,{top:!0}]])],2)]),o("span",le,b(r.footerBoldedText),1),o("span",ne,b(r.footerText),1)])}}};const ie={key:0,class:"card"},de={class:"flex justify-content-between align-items-center col-12 xl:col-12"},ce=o("h2",{style:{margin:"unset"}},"Sales Dashboard",-1),ue={class:"flex flex-wrap m-auto justify-content-center"},pe={className:"dashboard-widget"},fe={className:"dashboard-widget"},ge={className:"dashboard-widget"},me={className:"dashboard-widget"},he={className:"dashboard-widget"},ve={class:"col-12 xl:col-12"},_e={class:"card"},be=o("div",{class:"flex flex-row justify-content-between"},[o("h5",null,"Sales Comparisons")],-1),Ce={__name:"Dashboard",setup(D){const r=d(null),x=d(null);d(null);const y=d(null),u=d(!1),m=d({name:"Month To Date",code:"MTD"}),t=d(),S=d(!1);let w=getComputedStyle(document.documentElement),V=w.getPropertyValue("--text-color"),O=w.getPropertyValue("--text-color-secondary"),P=w.getPropertyValue("--surface-border");J(()=>{E.getData().then(e=>{e?(r.value=e,M(e)):u.value=!0})}),K();async function $(){var n,p,c,h,f,U,N;if(((n=m.value)==null?void 0:n.code)==="CUSTOM"&&(!((p=t==null?void 0:t.value)!=null&&p[0])||!((c=t==null?void 0:t.value)!=null&&c[1])))return;S.value=!0,u.value=!1;let e=m?m.value.code:"MTD",s=(h=t==null?void 0:t.value)!=null&&h[0]?g.extractCalendarDateString((f=t==null?void 0:t.value)==null?void 0:f[0]):null,a=(U=t==null?void 0:t.value)!=null&&U[1]?g.extractCalendarDateString((N=t==null?void 0:t.value)==null?void 0:N[1]):null;const l=await E.getData(e,s,a);l?(r.value=l,M(l)):u.value=!0,S.value=!1}function j(e,s){var a=[];return e.forEach((l,n)=>{a.push(A(l,n,s))}),a}function L(e,s){let a;return s.forEach(l=>{l.order===e&&(a=l.numberOfItems)}),a}function A(e,s,a){var l=[];const n=["#324aa8","#63f280","#fa4b7d"];return a.forEach((p,c)=>{l.push(L(c,e.orders))}),{label:e.label,data:l,fill:!1,backgroundColor:n[s],borderColor:n[s],tension:.4}}function M(e){x.value={labels:e.periodLabels,datasets:j(e.periods,e.periodLabels)},y.value={plugins:{legend:{labels:{fontColor:V}}},scales:{x:{ticks:{color:O},grid:{color:P,drawBorder:!1},title:{display:!0,text:F(e),font:{size:15,weight:"bold"},padding:{top:20}}},y:{ticks:{color:O},grid:{color:P,drawBorder:!1},title:{display:!0,text:"Units Ordered",font:{size:15,weight:"bold"},padding:{bottom:20}}}}}}function F(e){if(!e.periods[0].label)return"";const s=new Date;if(s.getFullYear()<1970)return"";const a=e.periods[0].label;return a==="Month to date"?`${g.getMonthString(s)} (${a})`:a==="Year to date"?`${s.getFullYear()} (${a})`:a}const G={title:"Total Orders",iconBg:"bg-blue-100",icon:"pi-shopping-cart text-blue-500",footerBoldedText:"24 new",footerText:" since last visit",tooltip:"Total orders are totaled for the current date range selected across all sales channels toggled."},I={title:"Units Ordered",iconBg:"bg-blue-100",icon:"pi-shopping-cart text-blue-500",footerText:" since last visit",footerBoldText:"24 new",tooltip:"Units ordered are totaled across all orders for the current date range selected across all sales channels toggled."},z={title:"Product Sales",iconBg:"bg-orange-100",icon:"pi-map-marker text-orange-500",footerText:" since last week",footerBoldedText:"%52+",tooltip:"Product sales are totaled for the current date range selected across all sales channels toggled."},Y={title:"Avg Units per Order",iconBg:"bg-cyan-100",icon:"pi-inbox text-cyan-500",footerText:" new orders",footerBoldedText:"520",tooltip:"Average Unit per ordered for the current date range selected across all sales channels toggled."},H={title:"Avg Sales Item",iconBg:"bg-purple-100",icon:"pi-comment text-purple-500",footerText:" responded",footerBoldedText:"42 ",tooltip:"Average sale cost per item for the current date range selected across all sales channels toggled."};return(e,s)=>{var l,n,p,c,h;const a=Q("Chart");return B(),C(Z,null,[i(R,{showErrorMessage:u.value},null,8,["showErrorMessage"]),r.value?(B(),C("div",ie,[o("div",de,[ce,i(te,{onHandlePresetChange:$,onHandleDateChange:$,preset:m.value,"onUpdate:preset":s[0]||(s[0]=f=>m.value=f),dates:t.value,"onUpdate:dates":s[1]||(s[1]=f=>t.value=f)},null,8,["preset","dates"])]),o("div",ue,[o("div",pe,[i(_,v(G,{data:(l=r.value)==null?void 0:l.numberOfOrders}),null,16,["data"])]),o("div",fe,[i(_,v(I,{data:(n=r.value)==null?void 0:n.numberOfItems}),null,16,["data"])]),o("div",ge,[i(_,v(z,{data:T(g).formatCurrency((p=r.value)==null?void 0:p.totalSales)}),null,16,["data"])]),o("div",me,[i(_,v(Y,{data:T(g).formatDecimal((c=r.value)==null?void 0:c.averageUnitsPerOrder)}),null,16,["data"])]),o("div",he,[i(_,v(H,{data:T(g).formatCurrency((h=r.value)==null?void 0:h.averageUnitPrice)}),null,16,["data"])])]),o("div",ve,[o("div",_e,[be,i(a,{type:"line",data:x.value,options:y.value},null,8,["data","options"])])]),i(ee,{showLoadingModal:S.value},null,8,["showLoadingModal"])])):X("",!0)],64)}}};export{Ce as default};
