import{b as s,u as se,y as le,P as ne,z as u,A as y,e as d,o as $,c as z,a as e,f as o,q as n,F as re,s as h,t as i,h as ie}from"./index-59b1a81b.js";import{_ as ce}from"./ErrorMessage-f525a803.js";import{_ as de}from"./LoadingModal-bfb2afa3.js";const ue={class:"grid"},me={class:"col-12"},_e={class:"card"},he=e("h2",null,"Product Performance",-1),pe={class:"col-12"},ve={class:"p-input-icon-left md:w-9"},fe=e("i",{class:"pi pi-search"},null,-1),be={style:{"font-weight":"normal"}},ye=e("p",null,null,-1),ge={key:0,class:"grid"},xe={class:"col-12 lg:col-6 xl:col-4"},we={class:"card mb-0"},Se={class:"flex justify-content-between mb-3"},Me=e("span",{class:"block text-500 font-medium mb-3"},"Average Sales Price",-1),De={class:"text-900 font-medium text-xl"},Te=e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-shopping-cart text-blue-500 text-xl"})],-1),Pe=e("span",{class:"text-green-500 font-medium"},"24 new ",-1),Ce=e("span",{class:"text-500"},"since last visit",-1),Ne={class:"col-12 lg:col-6 xl:col-4"},Ae={class:"card mb-0"},Le={class:"flex justify-content-between mb-3"},ke=e("span",{class:"block text-500 font-medium mb-3"},"Units sold YTD",-1),Ve={class:"text-900 font-medium text-xl"},Ie=e("div",{class:"flex align-items-center justify-content-center bg-orange-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-map-marker text-orange-500 text-xl"})],-1),Ue=e("span",{class:"text-green-500 font-medium"},"%52+ ",-1),Ye=e("span",{class:"text-500"},"since last week",-1),Be={class:"col-12 lg:col-6 xl:col-4"},Ee={class:"card mb-0"},Oe={class:"flex justify-content-between mb-3"},Fe=e("span",{class:"block text-500 font-medium mb-3"},"Total sales YTD",-1),Re={class:"text-900 font-medium text-xl"},je=e("div",{class:"flex align-items-center justify-content-center bg-cyan-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-inbox text-cyan-500 text-xl"})],-1),Je=e("span",{class:"text-green-500 font-medium"},"520 ",-1),$e=e("span",{class:"text-500"},"new orders",-1),ze={class:"col-12 xl:col-12"},He={class:"card"},Ze={__name:"Performance",setup(Ke){let S=getComputedStyle(document.documentElement),H=S.getPropertyValue("--text-color"),V=S.getPropertyValue("--text-color-secondary"),K=S.getPropertyValue("--surface-border");const M=s(!1);se();const Q=s([{name:"Month to date",code:"mtd"},{name:"Last year - month to date",code:"lastYearMtd"},{name:"Last month",code:"lastMonth"},{name:"Year to date",code:"ytd"},{name:"Last Year",code:"lastYear"}]),g=s({name:"Month to date",code:"mtd"}),D=s(""),I=s(0),U=s(null),Y=s(20),W=s(null),T=s(null),c=s(null),B=s(!1),P=s(!1),C=s(null),E=s(null),O=s(null);le(()=>{T.value=[],w(),G()});const m=["#7bcee3","#f7a223","#fa4b7d"];function q(t){I.value=t.page,Y.value=t.rows,w()}function Z(t){E.value={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"This year so far",backgroundColor:m[0],borderColor:m[0],data:x(t.monthlyPerformance,0,!0)},{label:"Last year",backgroundColor:m[1],borderColor:m[1],data:x(t.monthlyPerformance,1,!0)}]},O.value={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"This year so far",backgroundColor:m[0],borderColor:m[0],data:x(t.monthlyPerformance,0)},{label:"Last year",backgroundColor:m[1],borderColor:m[1],data:x(t.monthlyPerformance,1)}]}}function x(t,l,A){for(var L=new Date().getFullYear()-l,r=[],p=1;p<=12;p++){var v=null;for(var f in t){var b=f.split("-");parseInt(b[0])==L&&parseInt(b[1])==p&&(A?v=t[f].totalSales:v=t[f].unitsSold)}r.push(v)}return r}C.value={plugins:{legend:{labels:{fontColor:H}}},scales:{x:{ticks:{color:V,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:V},grid:{color:K,drawBorder:!1}}}};async function w(){M.value=!0;let t=g.value?g.value.code:"",l=await ne.getProductsPerformance(D.value,I.value,Y.value,t);l?(T.value=l.items,U.value=l.size):B.value=!0,M.value=!1}const G=()=>{W.value={global:{value:null,matchMode:u.CONTAINS},name:{operator:y.AND,constraints:[{value:null,matchMode:u.STARTS_WITH}]},"country.name":{operator:y.AND,constraints:[{value:null,matchMode:u.STARTS_WITH}]},representative:{value:null,matchMode:u.IN},date:{operator:y.AND,constraints:[{value:null,matchMode:u.DATE_IS}]},balance:{operator:y.AND,constraints:[{value:null,matchMode:u.EQUALS}]},status:{operator:y.OR,constraints:[{value:null,matchMode:u.EQUALS}]},activity:{value:[0,50],matchMode:u.BETWEEN},verified:{value:null,matchMode:u.EQUALS}}},X=t=>{var l=t.length>80?"...":"";return t.slice(0,80)+l},_=t=>t?t.toLocaleString("en-US",{style:"currency",currency:"USD"}):"$0.00";function ee(t){P.value=!0,c.value=t,Z(t)}let N;function te(){N&&clearTimeout(N),N=setTimeout(()=>{w()},2e3)}return(t,l)=>{const A=d("InputText"),L=d("Dropdown"),r=d("Column"),p=d("Button"),v=d("DataTable"),f=d("Paginator"),b=d("Chart"),F=d("TabPanel"),oe=d("TabView"),ae=d("Sidebar");return $(),z(re,null,[e("div",ue,[e("div",me,[e("div",_e,[o(ce,{showErrorMessage:B.value},null,8,["showErrorMessage"]),he,e("div",pe,[e("span",ve,[fe,o(A,{style:{width:"400px"},"onUpdate:modelValue":[te,l[0]||(l[0]=a=>D.value=a)],modelValue:D.value,placeholder:"Search by SKU, ASIN, Product Name"},null,8,["modelValue"])]),o(L,{onChange:w,modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=a=>g.value=a),options:Q.value,optionLabel:"name",placeholder:"Sort by",class:"w-full lg:w-3"},null,8,["modelValue","options"])]),o(v,{stripedRows:"",value:T.value,paginator:!1,class:"p-datatable-gridlines",rows:15,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll"},{empty:n(()=>[h(" No products found. ")]),loading:n(()=>[h(" Loading products data. Please wait. ")]),default:n(()=>[o(r,{field:"sku",header:"SKU",style:{"min-width":"12rem"}}),o(r,{field:"productName",header:"Product Name",style:{"min-width":"22rem"}}),o(r,{header:"MTD",style:{"min-width":"6rem"}},{body:n(({data:a})=>[h(i(_(a.mtd)),1)]),_:1}),o(r,{header:"Last year MTD",style:{"min-width":"6rem"}},{body:n(({data:a})=>[h(i(_(a.lastYearMtd)),1)]),_:1}),o(r,{header:"Last Month",style:{"min-width":"8rem"}},{body:n(({data:a})=>[h(i(_(a.lastMonth)),1)]),_:1}),o(r,{header:"YTD",style:{"min-width":"8rem"}},{body:n(({data:a})=>[h(i(_(a.ytd)),1)]),_:1}),o(r,{header:"Last year",style:{"min-width":"6rem"}},{body:n(({data:a})=>[h(i(_(a.lastYear)),1)]),_:1}),o(r,{header:"Details",style:{"min-width":"6rem"}},{body:n(({data:a})=>[o(p,{label:"Details",plain:"",text:"",raised:"",xicon:"pi pi-arrow-left",class:"xp-button-warning",onClick:k=>ee(a),style:{"margin-right":"0.25em"}},null,8,["onClick"])]),_:1})]),_:1},8,["value"]),o(f,{onPage:q,rows:20,totalRecords:U.value,rowsPerPageOptions:[10,20,30]},null,8,["totalRecords"]),o(ae,{visible:P.value,"onUpdate:visible":l[2]||(l[2]=a=>P.value=a),baseZIndex:1e3,position:"right",class:"sm:w-full md:w-9 lg:w-6"},{default:n(()=>{var a,k,R,j,J;return[e("h5",be,i(X(c.value.productName)),1),e("b",null,i(c.value.sku),1),e("p",null,"ASIN: "+i(c.value.asin),1),ye,c.value?($(),z("div",ge,[e("div",xe,[e("div",we,[e("div",Se,[e("div",null,[Me,e("div",De,i((a=c.value)!=null&&a.unitsSoldYtd?_(((k=c.value)==null?void 0:k.ytd)/((R=c.value)==null?void 0:R.unitsSoldYtd)):"$0.00"),1)]),Te]),Pe,Ce])]),e("div",Ne,[e("div",Ae,[e("div",Le,[e("div",null,[ke,e("div",Ve,i((j=c.value)==null?void 0:j.unitsSoldYtd),1)]),Ie]),Ue,Ye])]),e("div",Be,[e("div",Ee,[e("div",Oe,[e("div",null,[Fe,e("div",Re,i(_((J=c.value)==null?void 0:J.ytd)),1)]),je]),Je,$e])]),e("div",ze,[e("div",He,[o(oe,null,{default:n(()=>[o(F,{header:"Sales by Month"},{default:n(()=>[o(b,{type:"bar",data:E.value,options:C.value},null,8,["data","options"])]),_:1}),o(F,{header:"Units by Month"},{default:n(()=>[o(b,{type:"bar",data:O.value,options:C.value},null,8,["data","options"])]),_:1})]),_:1})])])])):ie("",!0)]}),_:1},8,["visible"])])])]),o(de,{showLoadingModal:M.value},null,8,["showLoadingModal"])],64)}}};export{Ze as default};
